<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Othmane ‚Äî Neon Sakura</title>

  <!-- Favicon -->
  <link rel="icon" href="ico.png" type="image/png">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #070816;
      --ink: rgba(255,255,255,.90);
      --muted: rgba(255,255,255,.66);

      --panel: rgba(10, 12, 28, .62);
      --panel2: rgba(10, 12, 28, .40);
      --border: rgba(255,255,255,.10);

      --cyan: #5de1ff;
      --pink: #ff4fd8;
      --purple: #a78bfa;

      --radius: 18px;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--ink);
      background: var(--bg);
      overflow-x:hidden;
    }

    /* Sakura neon GIF background */
    .bg{
      position:fixed;
      inset:0;
      z-index:-5;
      background:
        radial-gradient(1200px 700px at 75% 15%, rgba(167,139,250,.22), transparent 55%),
        radial-gradient(900px 600px at 15% 85%, rgba(255,79,216,.16), transparent 60%),
        url("sakura-midnight-train-wallpaperwaifu-com.gif") center/cover no-repeat fixed;
      filter: saturate(1.05) contrast(1.06);
      transform: translateZ(0);
    }

    /* readability overlay */
    .vignette{
      position:fixed;
      inset:0;
      z-index:-4;
      background:
        radial-gradient(1200px 700px at 50% 45%, rgba(0,0,0,.18), rgba(0,0,0,.70)),
        linear-gradient(to bottom, rgba(3,4,12,.25), rgba(3,4,12,.72));
      pointer-events:none;
    }

    /* scanlines */
    .scanlines{
      position:fixed;
      inset:0;
      z-index:-3;
      pointer-events:none;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,.035),
          rgba(255,255,255,.035) 1px,
          rgba(0,0,0,0) 3px,
          rgba(0,0,0,0) 6px
        );
      mix-blend-mode: soft-light;
      opacity:.26;
    }

    /* tiny grain */
    .grain{
      position:fixed;
      inset:-40%;
      z-index:-2;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.7' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      opacity:.10;
      animation: drift 12s linear infinite;
      transform: translateZ(0);
    }
    @keyframes drift{
      0%{ transform:translate3d(-2%, -2%, 0) rotate(0deg); }
      100%{ transform:translate3d(2%, 2%, 0) rotate(1deg); }
    }

    /* particles canvas */
    #particles{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:-1;
      filter: blur(.35px);
      mix-blend-mode: screen;
      opacity:.55;
    }

    /* layout */
    .wrap{
      max-width: 1080px;
      margin: 0 auto;
      padding: 22px 16px 76px;
    }

    header{
      position: sticky;
      top: 0;
      z-index: 50;
      padding: 12px 0;
      backdrop-filter: blur(10px);
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      padding: 12px 14px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(12,14,32,.62), rgba(12,14,32,.36));
      box-shadow: var(--shadow);
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 220px;
    }
  .logo{
    width:38px;
    height:38px;
    border-radius:12px;
    background-image: url("./ico.png");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    border:1px solid rgba(255,255,255,.14);
    box-shadow: 0 0 22px rgba(93,225,255,.20), 0 0 28px rgba(255,79,216,.16);
  }

    .brand h1{
      margin:0;
      font-family: "Press Start 2P", monospace;
      font-size: 12px;
      letter-spacing: .6px;
      line-height: 1.2;
    }
    .brand span{
      display:block;
      margin-top:4px;
      font-size: 12px;
      color: var(--muted);
    }

    nav{
      display:flex;
      align-items:center;
      flex-wrap:wrap;
      gap: 10px;
      justify-content:flex-end;
    }
    nav a{
      color: var(--muted);
      text-decoration:none;
      font-size: 13px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid transparent;
      transition: .18s ease;
      white-space:nowrap;
    }
    nav a:hover{
      color: var(--ink);
      border-color: rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }
    nav a.active{
      color: var(--ink);
      border-color: rgba(93,225,255,.30);
      background: rgba(93,225,255,.06);
      box-shadow: 0 0 0 1px rgba(93,225,255,.12) inset;
    }

    .social{
      display:flex;
      align-items:center;
      gap: 10px;
      margin-left: 4px;
    }
    .social a{
      width: 34px;
      height: 34px;
      display:grid;
      place-items:center;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--ink);
      text-decoration:none;
      transition: .18s ease;
    }
    .social a:hover{
      transform: translateY(-1px);
      border-color: rgba(255,79,216,.35);
      box-shadow: 0 12px 22px rgba(0,0,0,.35);
    }

    /* page shell */
    main{
      margin-top: 12px;
    }

    .panel{
      margin-top: 18px;
      padding: 18px;
      border-radius: var(--radius);
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(10,12,28,.52), rgba(10,12,28,.28));
      box-shadow: 0 14px 45px rgba(0,0,0,.35);
      position:relative;
      overflow:hidden;
    }
    .panel::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(600px 260px at 20% 20%, rgba(93,225,255,.14), transparent 60%),
        radial-gradient(520px 240px at 85% 40%, rgba(255,79,216,.16), transparent 65%);
      pointer-events:none;
    }
    .panel > *{ position:relative; }

    .kicker{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-size: 12px;
      width: fit-content;
    }
    .dot{
      width:8px; height:8px;
      border-radius: 99px;
      background: var(--cyan);
      box-shadow: 0 0 18px rgba(93,225,255,.55);
      animation: pulse 1.4s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{ transform:scale(1); opacity:.7; }
      50%{ transform:scale(1.35); opacity:1; }
    }

    .hero{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 16px;
      align-items:stretch;
    }

    .hero h2{
      margin: 14px 0 10px;
      font-size: clamp(26px, 4vw, 44px);
      letter-spacing: -0.02em;
      line-height: 1.05;
    }
    .glow{
      background: linear-gradient(90deg, var(--cyan), var(--pink));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      text-shadow: 0 0 30px rgba(93,225,255,.12), 0 0 30px rgba(255,79,216,.10);
    }
    .lead{
      margin: 0 0 14px;
      color: var(--muted);
      line-height: 1.55;
      font-size: 15px;
      max-width: 62ch;
    }


    /* achievements */
    .achievements{
      margin-top: 12px;
      padding: 12px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    .ach-title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 10px;
    }
    .ach-list{
      list-style:none;
      padding:0;
      margin:0;
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .ach-list li{
      display:flex;
      align-items:flex-start;
      gap: 10px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.45;
    }
    .ach-list i{
      margin-top: 2px;
      color: rgba(255,255,255,.92);
      text-shadow: 0 0 18px rgba(93,225,255,.16), 0 0 18px rgba(255,79,216,.10);
      width: 18px;
      text-align:center;
    }
    .ach-list b{ color: rgba(255,255,255,.88); }

    .actions{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
      margin-top: 14px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding: 10px 12px;
      font-weight:600;
      font-size: 13px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      color: var(--ink);
      cursor:pointer;
      transition: .18s ease;
      text-decoration:none;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.22);
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
    }
    .btn.primary{
      border-color: rgba(255,79,216,.42);
      background:
        radial-gradient(180px 90px at 20% 30%, rgba(93,225,255,.22), transparent 60%),
        linear-gradient(180deg, rgba(255,79,216,.22), rgba(10,12,28,.10));
      box-shadow: 0 0 24px rgba(255,79,216,.12);
    }

    .sidecard{
      border-radius: var(--radius);
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(10,12,28,.55), rgba(10,12,28,.30));
      padding: 16px;
      box-shadow: 0 18px 55px rgba(0,0,0,.42);
      position:relative;
      overflow:hidden;
    }
    .sidecard::after{
      content:"";
      position:absolute;
      inset:-40px;
      background:
        conic-gradient(from 180deg at 50% 50%,
          rgba(93,225,255,.14),
          rgba(255,79,216,.14),
          rgba(167,139,250,.14),
          rgba(93,225,255,.14)
        );
      opacity:.16;
      filter: blur(16px);
      animation: spin 10s linear infinite;
      pointer-events:none;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }
    .sidecard > *{ position:relative; }

    .stats{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    .stat{
      padding: 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    .stat b{ display:block; font-size: 15px; }
    .stat span{ display:block; margin-top:6px; font-size: 12px; color: var(--muted); }

    /* content sections */
    .title-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      gap: 10px;
      margin-bottom: 10px;
    }
    h3{
      margin: 0;
      font-size: 16px;
      letter-spacing: .2px;
    }
    .badge{
      font-size: 11px;
      padding: 5px 9px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--muted);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 14px;
      margin-top: 12px;
    }

    .card{
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding: 14px;
      transition: .18s ease;
      position:relative;
      overflow:hidden;
    }
    .card:hover{
      transform: translateY(-2px);
      border-color: rgba(93,225,255,.22);
      box-shadow: 0 20px 60px rgba(0,0,0,.40);
    }
    .card h4{
      margin: 0 0 6px;
      font-size: 14px;
      line-height: 1.2;
    }
    .meta{
      margin: 0 0 10px;
      color: rgba(255,255,255,.52);
      font-size: 12px;
    }
    .desc{
      color: var(--muted);
      font-size: 13px;
      line-height: 1.5;
    }

    .chips{
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
      margin-top: 10px;
    }
    .chip{
      font-size: 11px;
      padding: 5px 8px;
      border-radius: 999px;
      background: rgba(93,225,255,.07);
      border:1px solid rgba(93,225,255,.18);
      color: rgba(255,255,255,.82);
    }
    .chip.pink{ background: rgba(255,79,216,.07); border-color: rgba(255,79,216,.18); }
    .chip.purple{ background: rgba(167,139,250,.07); border-color: rgba(167,139,250,.18); }

    .buttons{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 12px;
    }

    .video-container{
      position:relative;
      padding-bottom: 56.25%;
      height:0;
      margin: 10px 0;
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.25);
    }
    .video-container iframe{
      position:absolute;
      top:0; left:0;
      width:100%;
      height:100%;
      border:0;
    }

    .certificate-image{
      width:100%;
      height:auto;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      margin-top: 10px;
    }

    .foot{
      margin-top: 18px;
      color: rgba(255,255,255,.45);
      font-size: 12px;
      text-align:center;
    }

    @media (max-width: 860px){
      .tech-grid{ grid-template-columns: repeat(2, 1fr); }
      .hero{ grid-template-columns: 1fr; }
      .brand{ min-width:unset; }
      .topbar{ flex-wrap:wrap; justify-content:center; }
      nav{ justify-content:center; }
    }

    @media (max-width: 420px){
      .tech-grid{ grid-template-columns: 1fr; }
    }

@media (prefers-reduced-motion: reduce){
      .grain, .dot, .sidecard::after{ animation:none !important; }
      .scanlines{ opacity:.10; }
    }
  
    /* loader */
    .top-progress{
      position:fixed;
      top:0;
      left:0;
      height:3px;
      width:0%;
      z-index:9998;
      background: linear-gradient(90deg, var(--cyan), var(--pink), var(--purple));
      box-shadow: 0 0 16px rgba(93,225,255,.25), 0 0 16px rgba(255,79,216,.16);
      opacity:0;
      transition: opacity .2s ease;
    }

    .loader{
      position:fixed;
      inset:0;
      z-index:9999;
      display:grid;
      place-items:center;
      background:
        radial-gradient(900px 520px at 50% 35%, rgba(93,225,255,.10), transparent 60%),
        radial-gradient(900px 520px at 55% 50%, rgba(255,79,216,.09), transparent 60%),
        radial-gradient(1400px 900px at 50% 60%, rgba(0,0,0,.45), rgba(0,0,0,.85));
      backdrop-filter: blur(8px);
      transition: opacity .35s ease, transform .35s ease;
    }
    .loader.hidden{
      opacity:0;
      transform: translateY(-6px);
      pointer-events:none;
    }
    .loader-card{
      width:min(520px, 92vw);
      padding: 18px 18px 16px;
      border-radius: calc(var(--radius) + 6px);
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(12,14,32,.66), rgba(12,14,32,.38));
      box-shadow: 0 22px 80px rgba(0,0,0,.62);
      position:relative;
      overflow:hidden;
    }
    .loader-card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(420px 220px at 20% 20%, rgba(93,225,255,.18), transparent 60%),
        radial-gradient(420px 220px at 85% 45%, rgba(255,79,216,.16), transparent 65%);
      pointer-events:none;
    }
    .loader-logo{
      width:52px; height:52px;
      border-radius: 18px;
      background-image: url("./ico.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 0 26px rgba(93,225,255,.22), 0 0 32px rgba(255,79,216,.16);
      animation: floaty 2.1s ease-in-out infinite;
    }
    @keyframes floaty{
      0%,100%{ transform: translateY(0px); }
      50%{ transform: translateY(-4px); }
    }
    .loader-title{
      margin-top: 12px;
      font-family: "Press Start 2P", monospace;
      font-size: 13px;
      letter-spacing: .6px;
      position:relative;
    }
    .loader-sub{
      margin-top: 8px;
      color: var(--muted);
      font-size: 13px;
      position:relative;
    }
    .loader-bar{
      margin-top: 14px;
      height: 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      overflow:hidden;
      position:relative;
    }
    .loader-bar-fill{
      height:100%;
      width: 12%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--cyan), var(--pink));
      box-shadow: 0 0 16px rgba(93,225,255,.22), 0 0 16px rgba(255,79,216,.14);
      transition: width .35s ease;
      position:relative;
    }
    .loader-bar-fill::after{
      content:"";
      position:absolute;
      top:0; left:-40%;
      width:40%;
      height:100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
      animation: sweep 1.1s linear infinite;
      opacity:.8;
    }
    @keyframes sweep{
      to{ left:120%; }
    }
    .loader-hint{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(255,255,255,.45);
      position:relative;
    }

    /* route/content enter animation */
    #content.enter{
      animation: contentIn .48s ease both;
    }
    @keyframes contentIn{
      from{ opacity:0; transform: translateY(8px); filter: blur(2px); }
      to{ opacity:1; transform: translateY(0); filter: blur(0); }
    }

    /* skeleton shimmer */
    .skeleton{
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      overflow:hidden;
      position:relative;
    }
    .skeleton::after{
      content:"";
      position:absolute;
      top:0; left:-60%;
      width:60%;
      height:100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.10), transparent);
      animation: shimmer 1.25s linear infinite;
    }
    @keyframes shimmer{
      to{ left:120%; }
    }
    .sk-line{ height: 12px; border-radius: 999px; background: rgba(255,255,255,.06); margin: 10px 0; }
    .sk-line.sm{ width: 45%; }
    .sk-line.md{ width: 72%; }
    .sk-line.lg{ width: 92%; }

</style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>
  <div class="scanlines" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <canvas id="particles"></canvas>

  <div id="top-progress" class="top-progress" aria-hidden="true"></div>

  <div id="loader" class="loader" role="status" aria-live="polite">
    <div class="loader-card">
      <div class="loader-logo" aria-hidden="true"></div>
      <div class="loader-title">@elesquina</div>
      <div class="loader-sub">Loading portfolio‚Ä¶</div>
      <div class="loader-bar" aria-hidden="true">
        <div class="loader-bar-fill" id="loaderFill"></div>
      </div>
      <div class="loader-hint">tip: press <b>G</b> for GitHub ‚Ä¢ <b>L</b> for LinkedIn</div>
    </div>
  </div>

  <div class="wrap">
    <header>
      <div class="topbar">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <h1>@elesquina</h1>
            <span>Othmane - Computer Science Engineering Student</span>
          </div>
        </div>

        <nav class="nav-links" aria-label="Primary">
          <a href="#home" data-route="home">Home</a>
          <a href="#projects" data-route="projects">Projects</a>
          <a href="#competitions" data-route="competitions">Competitions</a>
<a href="#experiences-certifications" data-route="experiences-certifications">Experiences</a>
        </nav>

        <div class="social" aria-label="Social links">
          <a href="https://github.com/elEsquina" target="_blank" rel="noreferrer" title="GitHub">
            <i class="fab fa-github"></i>
          </a>
          <a href="https://www.linkedin.com/in/othmane-azoubi-593814257" target="_blank" rel="noreferrer" title="LinkedIn">
            <i class="fab fa-linkedin"></i>
          </a>
        </div>
      </div>
    </header>

    <main id="content"></main>

    <div class="foot">
      ¬© <span id="year"></span> Othmane ‚Ä¢ built under neon skies üåôüå∏
    </div>
  </div>

  <script>
    // ====== NAV ACTIVE ======
    const navLinks = Array.from(document.querySelectorAll("nav a[data-route]"));
    function setActive(route){
      navLinks.forEach(a => a.classList.toggle("active", a.dataset.route === route));
    }

    
    // ====== LOADER + TRANSITIONS ======
    const loader = document.getElementById("loader");
    const loaderFill = document.getElementById("loaderFill");
    const topProgress = document.getElementById("top-progress");

    function setLoaderProgress(p){
      if (!loaderFill) return;
      const clamped = Math.max(0, Math.min(100, p));
      loaderFill.style.width = clamped + "%";
    }

    function hideLoader(){
      if (!loader) return;
      setLoaderProgress(100);
      setTimeout(() => loader.classList.add("hidden"), 220);
      setTimeout(() => loader.remove(), 900);
    }

    function showTopProgress(){
      if (!topProgress) return;
      topProgress.style.opacity = "1";
      topProgress.style.width = "0%";
      // animate to 90% quickly
      requestAnimationFrame(() => {
        topProgress.style.transition = "width .35s ease, opacity .2s ease";
        topProgress.style.width = "90%";
        setTimeout(() => {
          topProgress.style.width = "100%";
          setTimeout(() => {
            topProgress.style.opacity = "0";
            setTimeout(() => topProgress.style.width = "0%", 180);
          }, 160);
        }, 220);
      });
    }

    function contentEnter(){
      const content = document.getElementById("content");
      if (!content) return;
      content.classList.remove("enter");
      // reflow to restart animation
      void content.offsetWidth;
      content.classList.add("enter");
    }

    // quick keyboard shortcuts
    window.addEventListener("keydown", (e) => {
      if (e.target && (e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA")) return;
      if (e.key.toLowerCase() === "g") window.open("https://github.com/elEsquina", "_blank");
      if (e.key.toLowerCase() === "l") window.open("https://www.linkedin.com/in/othmane-azoubi-593814257", "_blank");
    });

    // ====== PARTICLES (NEON SPARKLES) ======
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');

    function hexToRgb(hex){
      const h = hex.replace('#','').trim();
      const bigint = parseInt(h, 16);
      return { r: (bigint >> 16) & 255, g: (bigint >> 8) & 255, b: bigint & 255 };
    }

    const palette = ['#5de1ff', '#ff4fd8', '#a78bfa', '#ffffff'].map(hexToRgb);

    function resizeCanvas(){
      const dpr = window.devicePixelRatio || 1;
      canvas.width = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    const particlesArray = [];
    const numberOfParticles = 95;
    const trailLength = 10;

    class Particle {
      constructor(){ this.reset(); }

      reset(){
        this.x = Math.random() * window.innerWidth;
        this.y = Math.random() * window.innerHeight;
        this.size = Math.random() * 2.4 + 1.2;
        this.baseSize = this.size;

        this.speedX = Math.random() * 0.35 - 0.175;
        this.speedY = Math.random() * 0.35 - 0.175;

        this.alpha = Math.random() * 0.45 + 0.35;
        this.baseAlpha = this.alpha;

        this.isActive = false;
        this.activeTimer = 0;
        this.trail = [];

        this.color = palette[Math.floor(Math.random() * palette.length)];
      }

      update(){
        if (this.isActive){
          this.trail.push({ x: this.x, y: this.y, a: this.alpha });
          if (this.trail.length > trailLength) this.trail.shift();

          this.activeTimer -= 16.67;
          if (this.activeTimer <= 0){
            this.isActive = false;
            this.size = this.baseSize;
            this.alpha = this.baseAlpha;
            this.trail = [];
          }
        } else {
          this.x += this.speedX;
          this.y += this.speedY;

          if (this.x < -30 || this.x > window.innerWidth + 30) this.speedX *= -1;
          if (this.y < -30 || this.y > window.innerHeight + 30) this.speedY *= -1;
          this.trail = [];
        }
      }

      draw(){
        // Trail
        for (let i = 0; i < this.trail.length; i++){
          const t = this.trail[i];
          const k = (i + 1) / this.trail.length;
          const a = this.alpha * k * 0.45;
          ctx.fillStyle = `rgba(${this.color.r}, ${this.color.g}, ${this.color.b}, ${a})`;
          ctx.beginPath();
          ctx.arc(t.x, t.y, this.size * k, 0, Math.PI * 2);
          ctx.fill();
        }
        // Core
        ctx.fillStyle = `rgba(${this.color.r}, ${this.color.g}, ${this.color.b}, ${this.alpha})`;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }

      activate(){
        this.isActive = true;
        this.size = this.baseSize * 1.9;
        this.alpha = 0.95;
        this.activeTimer = 520;
        this.trail = [];
      }
    }

    function initParticles(){
      particlesArray.length = 0;
      for (let i = 0; i < numberOfParticles; i++) particlesArray.push(new Particle());
    }

    function animateParticles(){
      ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      for (let i = 0; i < particlesArray.length; i++){
        particlesArray[i].update();
        particlesArray[i].draw();
      }
      requestAnimationFrame(animateParticles);
    }

    function activateRandomParticle(){
      if (!particlesArray.length) return;
      particlesArray[Math.floor(Math.random() * particlesArray.length)].activate();
    }

    initParticles();
    animateParticles();
    setInterval(activateRandomParticle, 1800);

    // ====== CONTENT RENDERING (USING data.json) ======
    async function loadContent() {
      const contentDiv = document.getElementById('content');

        // Skeleton while loading
        contentDiv.innerHTML = `
          <section class="panel">
            <div class="kicker"><span class="dot"></span> online</div>
            <div class="hero" style="margin-top:12px;">
              <div class="skeleton" style="padding:14px;">
                <div class="sk-line lg"></div>
                <div class="sk-line md"></div>
                <div class="sk-line md"></div>
                <div class="sk-line sm"></div>
              </div>
              <div class="skeleton" style="padding:14px;">
                <div class="sk-line md"></div>
                <div class="sk-line lg"></div>
                <div class="sk-line sm"></div>
                <div class="sk-line md"></div>
              </div>
            </div>
          </section>
        `;
          contentEnter();
        setLoaderProgress(18);


      try {
        const response = await fetch('data.json');
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();
        setLoaderProgress(65);

        function renderHome(){
          setActive("home");
          contentDiv.innerHTML = `
            <section class="panel">
              <div class="hero">
                <div>
                  <div class="kicker"><span class="dot"></span> online</div>
                  <h2><span class="glow">Hi! I am Othmane,</span></h2>
                  <p class="lead">I merge cybersecurity, IoT, AI, and embedded systems into innovative projects.</p>

                  <div class="achievements" aria-label="Achievements">
                    <div class="ach-title"><span class="badge">Achievements</span></div>
                    <ul class="ach-list">
                      <li><i class="fa-solid fa-trophy"></i><span><b>UofTCTF 2025:</b> 24th worldwide, <b>1st in Morocco</b> (UM6P College Of Computing CTF Team)</span></li>
                      <li><i class="fa-solid fa-flag"></i><span><b>CTF Author and Player:</b> UM6P College of Computing Official Team</span></li>
                      <li><i class="fa-solid fa-award"></i><span><b>1st Prize:</b> Local Domotics Competition @ UM6P (AI + IoT smart urban residence)</span></li>
                      <li><i class="fa-solid fa-people-group"></i><span><b>Student Lead:</b> UM6P ACM Student Chapter Cyber Security Division (UM6P Rabat and Benguerir Campuses)</span></li>
                    </ul>
                  </div>
                  <div class="actions">
                    <a class="btn primary" href="#projects">View Projects</a>
                    <a class="btn" href="https://github.com/elEsquina" target="_blank" rel="noreferrer">
                      <i class="fab fa-github"></i> GitHub
                    </a>
                    <a class="btn" href="https://www.linkedin.com/in/othmane-azoubi-593814257" target="_blank" rel="noreferrer">
                      <i class="fab fa-linkedin"></i> LinkedIn
                    </a>
                  </div>
                </div>

                <aside class="sidecard">
                  <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                    <span class="badge">Technologies I enjoy</span>
                  </div>

                  
                  <div class="tech-grid">
                    <div class="tech"><i class="fa-brands fa-python"></i><span>Python</span></div>
                    <div class="tech"><i class="fa-solid fa-code"></i><span>Go</span></div>
                    <div class="tech"><i class="fa-solid fa-code"></i><span>C/C++</span></div>
                    <div class="tech"><i class="fa-brands fa-linux"></i><span>Linux</span></div>

                    <div class="tech"><i class="fa-brands fa-git-alt"></i><span>Git</span></div>
                    <div class="tech"><i class="fa-brands fa-docker"></i><span>Docker</span></div>
                    <div class="tech"><i class="fa-solid fa-cubes-stacked"></i><span>Kubernetes</span></div>
                    <div class="tech"><i class="fa-brands fa-aws"></i><span>AWS</span></div>

                    <div class="tech"><i class="fa-solid fa-gears"></i><span>CI/CD</span></div>
                    <div class="tech"><i class="fa-solid fa-network-wired"></i><span>Nmap</span></div>
                    <div class="tech"><i class="fa-solid fa-bug"></i><span>Burp Suite</span></div>
                    <div class="tech"><i class="fa-solid fa-wave-square"></i><span>Wireshark</span></div>

                    <div class="tech"><i class="fa-solid fa-magnifying-glass"></i><span>Ghidra</span></div>
                    <div class="tech"><i class="fa-solid fa-terminal"></i><span>pwntools</span></div>
                    <div class="tech"><i class="fa-solid fa-microchip"></i><span>IoT/Embedded</span></div>
                    <div class="tech"><i class="fa-solid fa-microchip"></i><span>RISC‚ÄëV ASM</span></div>

                  <div style="margin-top:12px;color:var(--muted);font-size:13px;line-height:1.45;">
                    <span style="color:rgba(93,225,255,.9)">Quick jump:</span>
                    <a href="#experiences-certifications" style="color:rgba(255,255,255,.85); text-decoration:none;">experiences ‚Üí</a>
                  </div>
                </aside>
              </div>
            </section>
          `;
        }

        function renderProjects(){
          setActive("projects");
          let html = `
            <section class="panel">
              <div class="title-row">
                <h3>Projects</h3>
                <span class="badge">${data.projects?.length || 0} items</span>
              </div>
              <div id="projects" class="grid">
          `;

          (data.projects || []).forEach((p, idx) => {
            const chips = [];
            if (p.github) chips.push('<span class="chip">GitHub</span>');
            if (p.report) chips.push('<span class="chip pink">Report</span>');
            if (p.video) chips.push('<span class="chip purple">Video</span>');
            if (p.link) chips.push('<span class="chip">Link</span>');

            html += `
              <article class="card">
                <h4>${p.title || `Project ${idx+1}`}</h4>
                <div class="meta">${p.date || ""}</div>

                ${p.video ? `
                  <div class="video-container">
                    <iframe
                      src="${p.video}"
                      title="${(p.title || "project") + " video"}"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                      allowfullscreen
                    ></iframe>
                  </div>
                ` : ""}

                <div class="desc">${p.description || ""}</div>

                ${chips.length ? `<div class="chips">${chips.join("")}</div>` : ""}

                <div class="buttons">
                  ${p.github ? `<a class="btn primary" href="${p.github}" target="_blank" rel="noreferrer"><i class="fab fa-github"></i> Source</a>` : ""}
                  ${p.report ? `<a class="btn" href="${p.report}" target="_blank" rel="noreferrer"><i class="fa-solid fa-file-lines"></i> Report</a>` : ""}
                  ${p.link ? `<a class="btn" href="${p.link}" target="_blank" rel="noreferrer"><i class="fa-solid fa-arrow-up-right-from-square"></i> Live</a>` : ""}
                </div>
              </article>
            `;
          });

          html += `</div></section>`;
          contentDiv.innerHTML = html;
          contentEnter();
        }

        
        function renderCompetitions(){
          setActive("competitions");

          const list = Array.isArray(data.competitions) ? data.competitions : [];

          let html = `
            <section class="panel">
              <div class="title-row">
                <h3>Competitions <span class="badge" style="margin-left:10px;">CTF ‚Ä¢ events ‚Ä¢ prizes</span></h3>
                <span class="badge">${list.length} items</span>
              </div>

              <div class="grid">
          `;

          list.forEach((c) => {
            const chips = [];
            const title = (c.title || "").toLowerCase();
            if (c.link) chips.push('<span class="chip">Link</span>');
            if (c.report) chips.push('<span class="chip pink">Report</span>');
            if (c.video) chips.push('<span class="chip purple">Video</span>');
            if (/ctf|hack the box|htb/.test(title)) chips.push('<span class="chip pink">CTF</span>');
            if (/prize/.test(title)) chips.push('<span class="chip purple">Prize</span>');

            html += `
              <article class="card">
                <h4>üèÜ ${c.title || ""}</h4>
                <div class="meta">${c.issuer || ""} ‚Ä¢ ${c.date || ""}</div>

                ${c.video ? `
                  <div class="video-container">
                    <iframe
                      src="${c.video}"
                      title="${(c.title || "competition") + " video"}"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                      allowfullscreen
                    ></iframe>
                  </div>
                ` : ""}

                ${c.image ? `<img src="${c.image}" alt="${c.title || "competition"}" class="certificate-image" loading="lazy" referrerpolicy="no-referrer">` : ""}

                ${c.description ? `<div class="desc">${c.description}</div>` : `<div class="desc" style="opacity:.85;">‚Äî</div>`}

                ${chips.length ? `<div class="chips">${chips.join("")}</div>` : ""}

                <div class="buttons">
                  ${c.link ? `<a class="btn primary" href="${c.link}" target="_blank" rel="noreferrer"><i class="fa-solid fa-arrow-up-right-from-square"></i> Details</a>` : ""}
                  ${c.report ? `<a class="btn" href="${c.report}" target="_blank" rel="noreferrer"><i class="fa-solid fa-file-lines"></i> Report</a>` : ""}
                </div>
              </article>
            `;
          });

          html += `</div></section>`;
          contentDiv.innerHTML = html;
          contentEnter();
        }

function renderExperiencesAndCertifications(){
          setActive("experiences-certifications");

          // experiences
          let html = `
            <section class="panel">
              <div class="title-row">
                <h3>Experiences <span class="badge" style="margin-left:10px;">timeline</span></h3>
                <span class="badge">${data.experiences?.length || 0} items</span>
              </div>

              <div class="grid">
          `;

          if (data.experiences && data.experiences.length){
            data.experiences.forEach((e) => {
              html += `
                <article class="card">
                  <h4>${e.title || ""}</h4>
                  <div class="meta">${e.company || ""} ‚Ä¢ ${e.date || ""}</div>
                  <div class="desc">${e.description || ""}</div>

                  <div class="buttons">
                    ${e.link ? `<a class="btn primary" href="${e.link}" target="_blank" rel="noreferrer"><i class="fa-solid fa-arrow-up-right-from-square"></i> Details</a>` : ""}
                    ${e.report ? `<a class="btn" href="${e.report}" target="_blank" rel="noreferrer"><i class="fa-solid fa-file-lines"></i> Report</a>` : ""}
                  </div>
                </article>
              `;
            });
          } else {
            html += `<div class="card"><div class="desc">No experiences available.</div></div>`;
          }

          html += `</div></section>`;

          // certifications
          html += `
            <section class="panel">
              <div class="title-row">
                <h3>Certifications <span class="badge" style="margin-left:10px;">proof</span></h3>
                <span class="badge">${(data.certificates?.filter(c => !(/(ctf|competition|prize|hackathon|htb|meetup)/i.test(String(c.title || ""))) ).length) || 0} items</span>
              </div>

              <div class="grid">
          `;

          if (data.certificates && data.certificates.length){
            const isCompetition = (title) => /(ctf|competition|prize|hackathon|htb|meetup)/i.test(String(title || ""));
            const cleanCertificates = data.certificates.filter(c => !isCompetition(c.title));
            cleanCertificates.forEach((c) => {
              html += `
                <article class="card">
                  <h4>${c.title || ""}</h4>
                  <div class="meta">${c.issuer || ""} ‚Ä¢ ${c.date || ""}</div>

                  ${c.image ? `<img src="${c.image}" alt="${c.title || "certificate"}" class="certificate-image">` : ""}

                  <div class="buttons">
                    ${c.link ? `<a class="btn primary" href="${c.link}" target="_blank" rel="noreferrer"><i class="fa-solid fa-arrow-up-right-from-square"></i> Link</a>` : ""}
                    ${c.report ? `<a class="btn" href="${c.report}" target="_blank" rel="noreferrer"><i class="fa-solid fa-file-lines"></i> Report</a>` : ""}
                  </div>
                </article>
              `;
            });
          } else {
            html += `<div class="card"><div class="desc">No certificates available.</div></div>`;
          }

          html += `</div></section>`;
          contentDiv.innerHTML = html;
          contentEnter();
        }

        // router
        function router(){
          const hash = window.location.hash || "#home";
          if (hash === "#home") return renderHome();
          if (hash === "#projects") return renderProjects();
          if (hash === "#competitions") return renderCompetitions();
          if (hash === "#experiences-certifications") return renderExperiencesAndCertifications();
          // fallback
          window.location.hash = "#home";
        }

        window.addEventListener("hashchange", () => { showTopProgress(); router(); });
        showTopProgress();
        router();
        setLoaderProgress(92);
        setTimeout(hideLoader, 260);

      } catch (error) {
        console.error("Error loading data:", error);
        contentDiv.innerHTML = `
          <section class="panel">
            <div class="kicker"><span class="dot"></span> error</div>
            <h2><span class="glow">Couldn‚Äôt load data.json</span></h2>
            <p class="lead">Make sure <b>data.json</b> is next to <b>index.html</b>.</p>
          </section>
        `;
        setLoaderProgress(100);
        setTimeout(hideLoader, 260);
      }
    }

    document.getElementById("year").textContent = new Date().getFullYear();
    loadContent();
  </script>
</body>
</html>